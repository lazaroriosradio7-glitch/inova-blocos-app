<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RENOVA BLOCOS | Simulador Técnico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --laranja: #ea580c; --escuro: #0f172a; --bg: #f1f5f9; }
        body { background-color: var(--bg); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .step-inactive { display: none !important; }

        /* HEADER ESTILO PRINT */
        header { background: var(--escuro); border-bottom: 4px solid var(--laranja); color: white; }

        /* CANVAS GRID */
        .canvas-container {
            background: white; border-radius: 20px; border: 1px solid #e2e8f0;
            background-image: linear-gradient(#e2e8f0 1px, transparent 1px), linear-gradient(90deg, #e2e8f0 1px, transparent 1px);
            background-size: 20px 20px; position: relative; overflow: hidden; height: 600px;
        }

        /* BORDAS EM FORMAS IRREGULARES */
        .shape-obj {
            position: absolute; z-index: 10; cursor: move;
            filter: drop-shadow(2px 0 0 var(--laranja)) drop-shadow(-2px 0 0 var(--laranja)) 
                    drop-shadow(0 2px 0 var(--laranja)) drop-shadow(0 -2px 0 var(--laranja));
        }
        .shape-inner { width: 100%; height: 100%; background: rgba(255, 237, 213, 0.8); display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 900; text-transform: uppercase; color: #1e293b; }

        .lote-obj { filter: drop-shadow(2px 0 0 #64748b) drop-shadow(-2px 0 0 #64748b) drop-shadow(0 2px 0 #64748b) drop-shadow(0 -2px 0 #64748b); opacity: 0.3; pointer-events: none; }
        .lote-inner { background: #cbd5e1; width: 100%; height: 100%; }

        /* CONTROLES FLUTUANTES */
        .controls { position: absolute; top: -35px; left: 0; display: flex; gap: 4px; z-index: 50; }
        .btn-mini { background: var(--escuro); color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; cursor: pointer; border: none; font-weight: bold; }
        .btn-mini:hover { background: var(--laranja); }

        /* SIDEBAR CARDS */
        .card-sidebar { background: white; border-radius: 12px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .card-sidebar h3 { font-size: 10px; font-weight: 900; color: #94a3b8; text-transform: uppercase; margin-bottom: 10px; }
        .sidebar-input { width: 100%; padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-weight: bold; font-size: 13px; outline: none; margin-bottom: 5px; }
        
        /* BOTÕES */
        .btn-laranja { background: var(--laranja); color: white; font-weight: 900; padding: 10px; border-radius: 8px; width: 100%; transition: 0.2s; }
        .btn-laranja:hover { opacity: 0.9; transform: scale(1.02); }
        .btn-group button { padding: 6px 12px; border-radius: 6px; font-size: 11px; font-weight: bold; border: 1px solid #e2e8f0; background: #f8fafc; }
        .btn-group button.active { background: #16a34a; color: white; border-color: #16a34a; }
        .btn-group button.active-alt { background: var(--escuro); color: white; }

        /* FOOTER STATUS */
        .status-bar { background: var(--escuro); color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; border-top: 4px solid var(--laranja); }

        /* PAGE 2 CARDS */
        .advantage-card { background: #fff; border-radius: 25px; padding: 30px; border: 1px solid #fee2e2; transition: 0.3s; }
        .advantage-card.dark { background: var(--escuro); color: white; }
        .advantage-card.orange { background: var(--laranja); color: white; }
    </style>
</head>
<body>

<div id="etapa-1">
    <header class="p-4 flex justify-between items-center shadow-lg">
        <div>
            <h1 class="text-xl font-black italic tracking-tighter uppercase">RENOVA <span class="text-orange-600">BLOCOS</span> | PAREDES RÁPIDAS T & A</h1>
            <p class="text-[9px] font-bold text-slate-400">Simulador técnico • Página 1</p>
        </div>
        <div class="flex gap-8 text-right">
            <div>
                <p class="text-[10px] text-slate-400 font-bold uppercase">SINAPI/IBGE 2025</p>
                <p id="header-sinapi" class="text-sm font-black text-orange-500">R$ 0,00 /m²</p>
            </div>
            <div class="bg-white/5 px-6 py-2 rounded-xl">
                <p class="text-[10px] text-slate-400 font-bold uppercase">Total Estimado</p>
                <p id="header-total" class="text-lg font-black">R$ 0,00</p>
            </div>
        </div>
    </header>

    <main class="max-w-[1600px] mx-auto p-4 grid grid-cols-1 lg:grid-cols-12 gap-4">
        <!-- SIDEBAR -->
        <div class="lg:col-span-3 custom-scrollbar overflow-y-auto h-[calc(100vh-200px)]">
            <div class="card-sidebar">
                <h3>LOCALIZAÇÃO</h3>
                <select id="estado" onchange="atualizarValores()" class="sidebar-input">
                    <option value="">Selecione o Estado</option>
                    <option value="BA">Bahia (BA)</option>
                    <option value="SP">São Paulo (SP)</option>
                    <option value="SC">Santa Catarina (SC)</option>
                    <option value="RJ">Rio de Janeiro (RJ)</option>
                </select>
                <input type="text" id="cidade" placeholder="Cidade" class="sidebar-input">
                <div class="mt-2 text-sm font-bold">
                    <p>CUB: <span id="val-cub" class="text-slate-500">R$ 0,00</span></p>
                    <p>SINAPI: <span id="val-sinapi" class="text-slate-500">R$ 0,00</span></p>
                </div>
            </div>

            <div class="card-sidebar">
                <h3>PADRÃO CONSTRUTIVO</h3>
                <div class="btn-group flex gap-1">
                    <button onclick="setPadrao(0.9, this)">Popular</button>
                    <button onclick="setPadrao(1.3, this)" class="active">Médio</button>
                    <button onclick="setPadrao(1.8, this)">Alto</button>
                </div>
            </div>

            <div class="card-sidebar">
                <h3>TIPO DE OBRA</h3>
                <div class="btn-group flex gap-1">
                    <button onclick="setTipo(1, this)" class="active">Residencial</button>
                    <button onclick="setTipo(1.15, this)" class="active-alt">Comercial</button>
                </div>
            </div>

            <div class="card-sidebar">
                <h3>TERRENO (M) - Medidas Variáveis</h3>
                <div class="grid grid-cols-2 gap-2">
                    <input type="number" id="tf" placeholder="Frente" oninput="desenharLote()" class="sidebar-input" value="10">
                    <input type="number" id="tb" placeholder="Fundo" oninput="desenharLote()" class="sidebar-input" value="10">
                    <input type="number" id="te" placeholder="Esq" oninput="desenharLote()" class="sidebar-input" value="20">
                    <input type="number" id="td" placeholder="Dir" oninput="desenharLote()" class="sidebar-input" value="20">
                </div>
                <button onclick="desenharLote()" class="btn-laranja mt-2">Desenhar terreno</button>
            </div>

            <div class="card-sidebar">
                <h3>CÔMODO - Medidas Variáveis</h3>
                <input type="text" id="cnome" placeholder="Ex: Sala, Quarto..." class="sidebar-input">
                <div class="grid grid-cols-2 gap-2">
                    <input type="number" id="cf" placeholder="Frente" class="sidebar-input">
                    <input type="number" id="cb" placeholder="Fundo" class="sidebar-input">
                    <input type="number" id="cl_e" placeholder="Esq" class="sidebar-input">
                    <input type="number" id="cl_d" placeholder="Dir" class="sidebar-input">
                </div>
                <button onclick="addComodo()" class="btn-laranja mt-2">Adicionar cômodo</button>
            </div>
        </div>

        <!-- CANVAS -->
        <div class="lg:col-span-9">
            <div id="canvas" class="canvas-container shadow-inner">
                <div id="lote-v" class="shape-obj lote-obj transition-all duration-500">
                    <div class="lote-inner"></div>
                </div>
            </div>
        </div>
    </main>

    <div class="status-bar">
        <div class="flex gap-12 font-bold uppercase text-[11px] tracking-wider">
            <div>Área do terreno: <span id="res-lote" class="text-orange-500 text-lg ml-2">0.00 m²</span></div>
            <div>Área construída: <span id="res-area" class="text-orange-500 text-lg ml-2">0.00 m²</span></div>
            <div>Paredes prontas: <span id="res-blocos" class="text-orange-500 text-lg ml-2">0</span></div>
        </div>
        <button onclick="verResumo()" class="bg-orange-600 px-8 py-3 rounded-xl font-black italic uppercase text-sm hover:scale-105 transition shadow-lg">
            Ver por que a Renova Blocos é melhor →
        </button>
    </div>
</div>

<!-- PÁGINA 2 -->
<div id="etapa-2" class="step-inactive p-8">
    <div class="max-w-7xl mx-auto space-y-8">
        <!-- VANTAGENS -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="advantage-card shadow-lg">
                <h4 class="font-black italic text-lg text-slate-800 mb-2 uppercase">Termo Acústico</h4>
                <p class="text-sm text-slate-500 font-bold leading-tight">Isolamento superior que reduz custos com energia e ruídos externos.</p>
            </div>
            <div class="advantage-card dark shadow-lg flex flex-col justify-center">
                <i class="fa-solid fa-bolt text-orange-500 text-3xl mb-4"></i>
                <h4 class="font-black italic text-xl uppercase">Ultrarápido</h4>
                <p class="text-sm text-slate-400 font-bold leading-tight">Redução de até 40% no tempo total da construção.</p>
            </div>
            <div class="advantage-card shadow-lg">
                <h4 class="font-black italic text-lg text-slate-800 mb-2 uppercase">Zero Madeira</h4>
                <p class="text-sm text-slate-500 font-bold leading-tight">Não utiliza madeira para caixaria de pilares e vigas. Obra limpa!</p>
            </div>
            <div class="advantage-card shadow-lg">
                <h4 class="font-black italic text-lg text-slate-800 mb-2 uppercase">Leveza Estrutural</h4>
                <p class="text-sm text-slate-500 font-bold leading-tight">Redução média de 120kg/m² comparado ao sistema convencional.</p>
            </div>
            <div class="advantage-card shadow-lg">
                <i class="fa-solid fa-briefcase text-slate-400 text-3xl mb-4"></i>
                <h4 class="font-black italic text-lg text-slate-800 mb-2 uppercase">Menos Consumíveis</h4>
                <p class="text-sm text-slate-500 font-bold leading-tight">Economia real em pregos, arames, escoras e ferragens extras.</p>
            </div>
            <div class="advantage-card orange shadow-lg flex flex-col justify-center">
                <i class="fa-solid fa-users-slash text-white text-3xl mb-4"></i>
                <h4 class="font-black italic text-xl uppercase">Menos Mão de Obra</h4>
                <p class="text-sm text-orange-100 font-bold leading-tight">Processo simplificado que exige menos equipes no canteiro.</p>
            </div>
        </div>

        <!-- TABELA -->
        <div class="bg-white rounded-[35px] p-8 shadow-2xl border border-slate-100">
            <h3 class="text-3xl font-black italic mb-8 uppercase text-slate-800">Comparativo Tecnológico</h3>
            <div class="overflow-hidden rounded-2xl border border-slate-100">
                <table class="w-full text-left">
                    <thead class="bg-slate-900 text-white text-[11px] uppercase font-black">
                        <tr>
                            <th class="p-6">Tecnologia de Parede</th>
                            <th class="p-6">Custo M² Parede</th>
                            <th class="p-6">Tempo de Obra</th>
                            <th class="p-6">Total das Paredes</th>
                        </tr>
                    </thead>
                    <tbody id="tabela-comparativa" class="font-bold text-slate-700">
                        <!-- JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- FOOTER EPS -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-slate-50 p-10 rounded-[45px] border-2 border-dashed border-slate-200">
            <div class="bg-slate-900 p-12 rounded-[35px] text-white shadow-2xl relative overflow-hidden">
                <div class="absolute -right-10 -top-10 opacity-10 text-[150px] font-black italic">EPS</div>
                <p class="text-orange-500 font-black uppercase italic text-xs mb-3">Investimento Estimado (Chave na mão)</p>
                <h3 id="res-total-final" class="text-6xl font-black italic tracking-tighter">R$ 0,00</h3>
                <div class="mt-8 text-[11px] text-slate-400 font-bold uppercase tracking-widest">
                    <p>Local: <span id="res-local-final" class="text-white">-</span></p>
                    <p>Área: <span id="res-area-final" class="text-white">0 m²</span></p>
                </div>
            </div>
            <div class="text-center space-y-6">
                <h4 class="text-5xl font-black italic uppercase tracking-tighter text-slate-800">Pronto para começar?</h4>
                <p class="text-slate-500 font-bold uppercase text-sm">Receba o detalhamento técnico e o cronograma de entrega dos blocos.</p>
                <button onclick="falarWhatsApp()" class="bg-orange-600 text-white w-full py-6 rounded-3xl font-black uppercase italic shadow-2xl text-xl hover:scale-105 transition flex justify-center items-center gap-4">
                    <i class="fa-brands fa-whatsapp text-3xl"></i> Baixar PDF e Falar no WhatsApp
                </button>
                <button onclick="voltarConfig()" class="text-slate-400 font-black uppercase text-xs underline">Voltar para a Planta</button>
            </div>
        </div>
    </div>
</div>

<script>
    // DADOS 2025
    const dadosStates = {
        BA: { cub: 1935, sinapi: 1755 },
        SP: { cub: 2280, sinapi: 2050 },
        SC: { cub: 2150, sinapi: 1980 },
        RJ: { cub: 2300, sinapi: 2100 }
    };

    let proj = {
        uf: '', padrao: 1.3, tipo: 1, escala: 14,
        comodos: [], hParede: 2.8
    };

    function atualizarValores() {
        proj.uf = document.getElementById('estado').value;
        if(!proj.uf) return;
        const base = dadosStates[proj.uf];
        const vCub = base.cub * proj.padrao * proj.tipo;
        const vSinapi = base.sinapi * proj.padrao * proj.tipo;

        document.getElementById('val-cub').innerText = vCub.toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
        document.getElementById('val-sinapi').innerText = vSinapi.toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
        document.getElementById('header-sinapi').innerText = `R$ ${vSinapi.toFixed(2)} /m²`;
        
        atualizarCalculos();
    }

    function setPadrao(val, btn) {
        proj.padrao = val;
        document.querySelectorAll('#etapa-1 .btn-group button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        atualizarValores();
    }

    function setTipo(val, btn) {
        proj.tipo = val;
        document.querySelectorAll('#etapa-1 .btn-group:nth-child(2) button').forEach(b => b.classList.remove('active', 'active-alt'));
        btn.classList.add(val > 1 ? 'active-alt' : 'active');
        atualizarValores();
    }

    function desenharLote() {
        const f = parseFloat(document.getElementById('tf').value) || 1;
        const b = parseFloat(document.getElementById('tb').value) || 1;
        const e = parseFloat(document.getElementById('te').value) || 1;
        const d = parseFloat(document.getElementById('td').value) || 1;

        const lote = document.getElementById('lote-v');
        const maxW = Math.max(f, b); const maxH = Math.max(e, d);
        lote.style.width = (maxW * proj.escala) + 'px';
        lote.style.height = (maxH * proj.escala) + 'px';
        lote.style.left = '50px'; lote.style.top = '50px';

        const fP = (f/maxW)*100, bP = (b/maxW)*100, eP = (e/maxH)*100, dP = (d/maxH)*100;
        lote.style.clipPath = `polygon(0% 0%, ${fP}% 0%, ${bP}% 100%, 0% 100%)`;
        
        const areaL = ((f + b)/2) * ((e + d)/2);
        document.getElementById('res-lote').innerText = areaL.toFixed(2) + " m²";
    }

    function addComodo() {
        const nome = document.getElementById('cnome').value || "Sala";
        const f = parseFloat(document.getElementById('cf').value);
        const b = parseFloat(document.getElementById('cb').value) || f;
        const e = parseFloat(document.getElementById('cl_e').value);
        const d = parseFloat(document.getElementById('cl_d').value) || e;

        if(!f || !e) return alert("Preencha Frente e Lateral Esq.");

        const id = Date.now();
        proj.comodos.push({ id, nome, f, b, e, d, x: 100, y: 100, rot: 0 });
        renderizar();
    }

    function renderizar() {
        const canvas = document.getElementById('canvas');
        document.querySelectorAll('.shape-comodo').forEach(e => e.remove());

        proj.comodos.forEach(c => {
            const maxW = Math.max(c.f, c.b); const maxH = Math.max(c.e, c.d);
            const wrap = document.createElement('div');
            wrap.className = 'shape-obj shape-comodo';
            wrap.style.width = (maxW * proj.escala) + 'px';
            wrap.style.height = (maxH * proj.escala) + 'px';
            wrap.style.left = c.x + 'px'; wrap.style.top = c.y + 'px';
            wrap.style.transform = `rotate(${c.rot}deg)`;

            const fP = (c.f/maxW)*100, bP = (c.b/maxW)*100, eP = (c.e/maxH)*100, dP = (c.d/maxH)*100;

            wrap.innerHTML = `
                <div class="controls">
                    <button class="btn-mini" onclick="girar(${c.id})">Girar</button>
                    <button class="btn-mini" onclick="excluir(${c.id})">✕</button>
                </div>
                <div class="shape-inner" style="clip-path: polygon(0% 0%, ${fP}% 0%, ${bP}% 100%, 0% 100%);">
                    ${c.nome}
                </div>`;
            
            // Drag
            wrap.onmousedown = (e) => {
                if(e.target.tagName == 'BUTTON') return;
                let ox = e.clientX, oy = e.clientY;
                document.onmousemove = (ev) => {
                    c.x += (ev.clientX - ox); c.y += (ev.clientY - oy);
                    ox = ev.clientX; oy = ev.clientY;
                    wrap.style.left = c.x + 'px'; wrap.style.top = c.y + 'px';
                };
                document.onmouseup = () => { document.onmousemove = null; atualizarCalculos(); };
            };
            canvas.appendChild(wrap);
        });
        atualizarCalculos();
    }

    function girar(id) { 
        const c = proj.comodos.find(r => r.id === id); 
        c.rot = (c.rot + 90) % 360; 
        renderizar(); 
    }
    function excluir(id) { 
        proj.comodos = proj.comodos.filter(r => r.id !== id); 
        renderizar(); 
    }

    function atualizarCalculos() {
        let areaC = 0, perim = 0;
        proj.comodos.forEach(c => {
            areaC += ((c.f + c.b)/2) * ((c.e + c.d)/2);
            perim += (c.f + c.b + c.e + c.d);
        });

        document.getElementById('res-area').innerText = areaC.toFixed(2) + " m²";
        const totalParedes = perim * proj.hParede;
        document.getElementById('res-blocos').innerText = Math.ceil(totalParedes);
        
        // Total Geral
        if(proj.uf) {
            const sinapi = dadosStates[proj.uf].sinapi * proj.padrao * proj.tipo;
            const totalGeral = areaC * sinapi;
            document.getElementById('header-total').innerText = totalGeral.toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
            document.getElementById('res-total-final').innerText = totalGeral.toLocaleString('pt-BR', {style:'currency', currency:'BRL'});
        }
        return { areaC, totalParedes };
    }

    function verResumo() {
        if(!proj.uf) return alert("Selecione o Estado.");
        const calc = atualizarCalculos();
        
        document.getElementById('res-local-final').innerText = document.getElementById('cidade').value + " / " + proj.uf;
        document.getElementById('res-area-final').innerText = calc.areaC.toFixed(2) + " m²";

        const tabela = document.getElementById('tabela-comparativa');
        const tecnologias = [
            { n: 'Bloco Baiano (Convencional)', m2: 450, t: 'Lento (Meses)', c: calc.totalParedes * 450 },
            { n: 'Bloco Cimento', m2: 520, t: 'Médio (Semanas)', c: calc.totalParedes * 520 },
            { n: 'Parede de Concreto', m2: 780, t: 'Rápido (Dias)', c: calc.totalParedes * 780 },
            { n: 'RENOVA BLOCOS EPS (Fábrica)', m2: 120, t: 'Ultrarápido (Horas)', c: calc.totalParedes * 120, d: true }
        ];

        tabela.innerHTML = '';
        tecnologias.forEach(tec => {
            const tr = document.createElement('tr');
            tr.className = tec.d ? "bg-orange-600 text-white shadow-xl scale-105" : "border-b border-slate-100";
            tr.innerHTML = `
                <td class="p-6">${tec.n}</td>
                <td class="p-6">R$ ${tec.m2},00</td>
                <td class="p-6 uppercase italic">${tec.t}</td>
                <td class="p-6 text-xl">R$ ${tec.c.toLocaleString('pt-BR')}</td>`;
            tabela.appendChild(tr);
        });

        document.getElementById('etapa-1').classList.add('step-inactive');
        document.getElementById('etapa-2').classList.remove('step-inactive');
        window.scrollTo(0,0);
    }

    function voltarConfig() {
        document.getElementById('etapa-2').classList.add('step-inactive');
        document.getElementById('etapa-1').classList.remove('step-inactive');
    }

    function falarWhatsApp() {
        const msg = `Olá Renova Blocos! Usei o simulador e projetei uma obra de ${document.getElementById('res-area').innerText}. Gostaria do memorial técnico.`;
        window.open(`https://wa.me/5571987393020?text=${encodeURIComponent(msg)}`, '_blank');
    }

    desenharLote();
</script>

</body>
</html>
