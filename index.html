<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>RENOVA BLOCOS | PAREDES RÁPIDAS T & A</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --laranja:#ea580c;
  --escuro:#0f172a;
  --cinza:#475569;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:#f1f5f9;
}
header{
  background:var(--escuro);
  color:#fff;
  padding:14px 20px;
  border-bottom:4px solid var(--laranja);
}
header h1{margin:0;font-size:22px;font-weight:900}
header span{font-size:11px;color:#cbd5e1}

main{
  max-width:1400px;
  margin:auto;
  padding:16px;
  display:grid;
  grid-template-columns:360px 1fr;
  gap:16px;
}
@media(max-width:900px){
  main{grid-template-columns:1fr}
}

.card{
  background:#fff;
  border-radius:12px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.06);
}
.card h3{
  margin:0 0 8px;
  font-size:11px;
  text-transform:uppercase;
  color:#64748b;
}
label{font-size:12px;font-weight:bold}
input,select{
  width:100%;
  padding:7px;
  margin:4px 0 6px;
  border-radius:6px;
  border:1px solid #cbd5e1;
}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:6px}

button{
  padding:9px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
.btn{background:var(--laranja);color:#fff}
.btn-alt{background:#334155;color:#fff}
.btn-sel{background:#16a34a;color:#fff}

.canvas-wrap{
  background:#fff;
  border-radius:18px;
  padding:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.06);
}
.canvas{
  background:#f8fafc;
  border:2px dashed #cbd5e1;
  border-radius:14px;
  height:440px;
  position:relative;
  overflow:hidden;
}

#lote{
  position:absolute;
  background:rgba(148,163,184,.15);
  border:3px solid var(--cinza);
}

.comodo{
  position:absolute;
  background:rgba(255,237,213,.97);
  border:2px solid var(--laranja);
  font-size:10px;
  font-weight:bold;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:move;
}
.controls{
  position:absolute;
  top:-26px;
  left:0;
  display:flex;
  gap:4px;
}
.controls button{
  padding:2px 6px;
  font-size:10px;
  border-radius:4px;
  background:#0f172a;
  color:#fff;
}

footer{
  background:var(--escuro);
  color:#fff;
  padding:12px 20px;
  border-top:4px solid var(--laranja);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
footer span{font-weight:bold}
</style>
</head>

<body>

<header>
  <h1>RENOVA BLOCOS | PAREDES RÁPIDAS T & A</h1>
  <span>Simulador técnico • Página 1</span>
</header>

<main>

<!-- PAINEL -->
<div>

<div class="card">
<h3>Localização</h3>
<select id="estado" onchange="atualizarIndices()">
<option value="">Estado</option>
<option value="BA">Bahia</option>
<option value="SP">São Paulo</option>
<option value="SC">Santa Catarina</option>
</select>
<input id="cidade" placeholder="Cidade">
<div><b>CUB:</b> <span id="cub">R$ 0,00</span></div>
<div><b>SINAPI:</b> <span id="sinapi">R$ 0,00</span></div>
</div>

<div class="card">
<h3>Padrão construtivo</h3>
<button class="btn-alt" onclick="setPadrao(0.9)">Popular</button>
<button class="btn-sel" onclick="setPadrao(1)">Médio</button>
<button class="btn-alt" onclick="setPadrao(1.25)">Alto</button>
</div>

<div class="card">
<h3>Tipo de obra</h3>
<button class="btn-sel" onclick="setTipo(1)">Residencial</button>
<button class="btn-alt" onclick="setTipo(1.15)">Comercial</button>
</div>

<div class="card">
<h3>Terreno (m)</h3>
<div class="grid2">
<input id="tf" placeholder="Frente">
<input id="tb" placeholder="Fundo">
<input id="te" placeholder="Esq">
<input id="td" placeholder="Dir">
</div>
<button class="btn" onclick="desenharLote()">Desenhar terreno</button>
</div>

<div class="card">
<h3>Cômodo</h3>
<input id="ctipo" placeholder="Tipo do cômodo">
<div class="grid2">
<input id="cf" placeholder="Frente">
<input id="cb" placeholder="Fundo">
<input id="ce" placeholder="Esq">
<input id="cd" placeholder="Dir">
</div>
<button class="btn" onclick="addComodo()">Adicionar cômodo</button>
</div>

</div>

<!-- PLANTA -->
<div class="canvas-wrap">
  <div class="canvas" id="canvas"></div>
</div>

</main>

<footer>
  <div>Área do terreno: <span id="areaTerreno">0 m²</span></div>
  <div>Área construída: <span id="areaConstruida">0 m²</span></div>
  <div>Paredes prontas (1×1): <span id="blocos">0</span></div>
</footer>

<script>
const estados={
BA:{cub:2150,sinapi:1950},
SP:{cub:2480,sinapi:2250},
SC:{cub:2300,sinapi:2100}
};

let padrao=1, tipo=1;
let escala=12;
let loteData=null;
let areaConstruida=0;
let alturaParede=2.8;
let comodos=[];

function atualizarIndices(){
  const uf=estado.value;
  if(!uf)return;
  cub.innerText=(estados[uf].cub*padrao*tipo).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
  sinapi.innerText=(estados[uf].sinapi*padrao*tipo).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});
}
function setPadrao(v){padrao=v;atualizarIndices()}
function setTipo(v){tipo=v;atualizarIndices()}

function desenharLote(){
  canvas.innerHTML="";
  const f=+tf.value||10,b=+tb.value||f,e=+te.value||10,d=+td.value||e;
  loteData={f,b,e,d};
  const maxW=Math.max(f,b), maxH=Math.max(e,d);
  const lote=document.createElement("div");
  lote.id="lote";
  lote.style.width=(maxW*escala)+"px";
  lote.style.height=(maxH*escala)+"px";
  lote.style.left="40px";
  lote.style.top="40px";
  lote.style.clipPath=`polygon(
    0% 0%,
    ${(f/maxW)*100}% 0%,
    ${(b/maxW)*100}% ${(d/maxH)*100}%,
    0% ${(e/maxH)*100}%
  )`;
  canvas.appendChild(lote);
  areaTerreno.innerText=((f+b)/2*((e+d)/2)).toFixed(2)+" m²";
  atualizarBlocos();
}

function addComodo(){
  if(!loteData) return alert("Desenhe o terreno primeiro");
  const f=+cf.value||1,b=+cb.value||f,e=+ce.value||1,d=+cd.value||e;
  const maxW=Math.max(f,b), maxH=Math.max(e,d);
  const c=document.createElement("div");
  c.className="comodo";
  c.style.width=(maxW*escala)+"px";
  c.style.height=(maxH*escala)+"px";
  c.style.left="60px";
  c.style.top="60px";
  c.style.clipPath=`polygon(
    0% 0%,
    ${(f/maxW)*100}% 0%,
    ${(b/maxW)*100}% ${(d/maxH)*100}%,
    0% ${(e/maxH)*100}%
  )`;
  c.innerText=ctipo.value||"Cômodo";

  const ctr=document.createElement("div");
  ctr.className="controls";
  ctr.innerHTML=`<button onclick="girar(this)">⟳</button><button onclick="excluir(this)">✕</button>`;
  c.appendChild(ctr);

  ativarDrag(c);
  canvas.appendChild(c);

  areaConstruida+=((f+b)/2)*((e+d)/2);
  areaConstruidaElem();
  atualizarBlocos();
}

function areaConstruidaElem(){
  areaConstruidaElem;
  areaConstruidaElem = document.getElementById("areaConstruida");
  areaConstruidaElem.innerText=areaConstruida.toFixed(2)+" m²";
}

function atualizarBlocos(){
  let perimetro=0;
  document.querySelectorAll(".comodo").forEach(el=>{
    const w=el.offsetWidth/escala;
    const h=el.offsetHeight/escala;
    perimetro+=2*(w+h);
  });
  blocos.innerText=Math.ceil(perimetro*alturaParede);
}

function girar(btn){
  const c=btn.parentElement.parentElement;
  const r=(c.dataset.rot||0);
  c.dataset.rot=(+r+90)%360;
  c.style.transform=`rotate(${c.dataset.rot}deg)`;
}
function excluir(btn){
  const c=btn.parentElement.parentElement;
  canvas.removeChild(c);
  atualizarBlocos();
}

function ativarDrag(el){
  let ox,oy;
  el.onmousedown=e=>{
    ox=e.offsetX;oy=e.offsetY;
    document.onmousemove=ev=>{
      let x=ev.pageX-canvas.offsetLeft-ox;
      let y=ev.pageY-canvas.offsetTop-oy;
      const snap=10;
      document.querySelectorAll(".comodo").forEach(o=>{
        if(o!==el){
          if(Math.abs(o.offsetLeft-(x+el.offsetWidth))<snap) x=o.offsetLeft-el.offsetWidth;
          if(Math.abs((o.offsetLeft+o.offsetWidth)-x)<snap) x=o.offsetLeft+o.offsetWidth;
          if(Math.abs(o.offsetTop-(y+el.offsetHeight))<snap) y=o.offsetTop-el.offsetHeight;
          if(Math.abs((o.offsetTop+o.offsetHeight)-y)<snap) y=o.offsetTop+o.offsetHeight;
        }
      });
      el.style.left=x+"px";
      el.style.top=y+"px";
    };
    document.onmouseup=()=>{document.onmousemove=null};
  };
}
</script>

</body>
</html>
